<!doctype html>
<html ng-app="app">
  <head>
  <!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular.min.js"></script>
    <script src="js/app.js"></script>
  </head>
  <body ng-controller="TodoController as self">

        <div class="row" style="margin-top: 100px;">
            <h4 style="text-align:center; margin-bottom: 30px;">Liste des produits</h5>
            <div class="col col-lg-6" style="float: none; text-align: center; margin: auto;">
                
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                        <th>#</th>
                        <th>Produit</th>
                        <th style="width: 30%;">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="todo in self.todos">
                        <th>{{todo.id}}</th>
                        <td style="text-align:left;">
                            <span ng-if="!self.isEditing[$index]">{{todo.message}}</span>
                            <input ng-if="self.isEditing[$index]" id="editMessage" type="text" class="form-control" ng-model="self.todo.newMessage" placeholder="Nom du produit">
                        </td>
                        <td>
                            <button ng-if="!self.isEditing[$index]" type="button" class="btn btn-primary" ng-click="self.isEditing[$index] = true; self.todo.newMessage = todo.message;">Modifier</button>
                            <button ng-if="!self.isEditing[$index]" type="button" class="btn btn-danger" ng-click="self.deleteTodo(todo.id)">Supprimer</button>

                            <button ng-if="self.isEditing[$index]" type="button" class="btn btn-success" ng-click="self.isEditing[$index] = false; self.saveModification(todo.id, self.todo.newMessage);">Save</button>
                            <button ng-if="self.isEditing[$index]" type="button" class="btn btn-danger" ng-click="self.isEditing[$index] = false;">Cancel</button>
                        </td>
                        </tr>
                    </tbody>
                </table>

                <hr>

                <h4>Ajouter un produit</h4>
                <form class="form-inline">
                    <div class="form-group mx-sm-3 mb-2">
                        <input id="message" type="text" class="form-control" ng-model="self.todo.message" placeholder="Nom du produit">
                    </div>
                    <button type="submit" class="btn btn-success mb-2" ng-click="self.saveTodo(); self.todo.message = null;">Ajouter</button>
                </form>

            </div>
        </div>
    
    </body>
</html>
